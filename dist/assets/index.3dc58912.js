import{h as D,r as m,o as s,an as F,j as t,ao as J,af as K,ap as X,ac as z,ad as y,a8 as k,aa as T,U as E,D as A,L as P,B as Y,C as Z,E as L}from"./index.7ed68957.js";import{S as O}from"./react-select.esm.67b469f7.js";import{Q as ee,R as te}from"./app-users.9834fa95.js";import{b as ae,s as j,d as re,S as se,M as le,E as ne,e as oe,T as ie}from"./App.13c64db0.js";import{g as ce,d as ue}from"./CourseActionCreators.1947fb33.js";import{g as de}from"./CourseCategoryActionCreators.3c5324ef.js";import"./toConsumableArray.917c2683.js";let me=({mainData:p,handlePerPage:a,rowsPerPage:c,handleFilter:o,searchTerm:g})=>{function h(u){let r,n=",",v=`
`,C=Object.keys(p[0]);return r="",r+=C.join(n),r+=v,u.forEach(w=>{let i=0;C.forEach(S=>{i>0&&(r+=n),r+=w[S],i++}),r+=v}),r}function N(u){let r=document.createElement("a"),n=h(u);if(n===null)return;let v="export.csv";n.match(/^data:text\/csv/i)||(n=`data:text/csv;charset=utf-8,${n}`),r.setAttribute("href",encodeURI(n)),r.setAttribute("download",v),r.click()}return t("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:s(z,{children:[t(y,{xl:"6",className:"d-flex align-items-center p-0",children:s("div",{className:"d-flex align-items-center w-100",children:[t("label",{htmlFor:"rows-per-page",children:"Show"}),s(T,{className:"mx-50",type:"select",id:"rows-per-page",value:c,onChange:a,style:{width:"5rem"},children:[t("option",{value:"10",children:"10"}),t("option",{value:"25",children:"25"}),t("option",{value:"50",children:"50"})]}),t("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),s(y,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[s("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[t("label",{className:"mb-0",htmlFor:"search-invoice",children:"Search:"}),t(T,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:g,onChange:u=>o(u.target.value)})]}),s("div",{className:"d-flex align-items-center table-header-actions",children:[t(E,{className:"me-1",children:s(A,{color:"secondary",caret:!0,outline:!0,children:[t(se,{className:"font-small-4 me-50"}),t("span",{className:"align-middle",onClick:()=>N(p),children:"Excel"})]})}),t(P,{className:"btn btn-primary add-new-user",to:"/apps/course/create",children:"New Course"})]})]})]})})},pe=(p,a,c)=>p.slice((c-1)*a,c*a);function b(p,a){let c=p;var o=[];return a.currentCategory===""&&a.status===""?o=c:o=c.filter(g=>{if(a.currentCategory!==""&&a.status!=="")return g.courseCategory&&a.currentCategory.toLowerCase()===g.courseCategory.toLowerCase()&&g.status.toLowerCase()===a.status.toLowerCase();if(a.currentCategory!=="")return g.courseCategory&&a.currentCategory.toLowerCase()===g.courseCategory.toLowerCase();if(a.status!=="")return g.status.toLowerCase()===a.status.toLowerCase()}),pe(o,a.perPage,a.page)}let ge=()=>{let p=ae(),a=D(e=>e.CourseStateData),c=D(e=>e.CourseCategoryStateData),[o,g]=m.exports.useState("desc"),[h,N]=m.exports.useState(""),[u,r]=m.exports.useState([]),[n,v]=m.exports.useState(1),[C,w]=m.exports.useState("id"),[i,S]=m.exports.useState(10),[f,q]=m.exports.useState({value:"",label:"Select Status",number:0}),[x,I]=m.exports.useState({value:"",label:"Select Category",number:0}),[W,R]=m.exports.useState([]);m.exports.useEffect(()=>{if(p(de()),p(ce()),c)var e=c.map(l=>({value:l.name,label:l.name}));e.unshift({value:"",label:"Select Category"}),R(e),r(b(a,{sort:o,sortColumn:C,q:h,page:n,perPage:i,status:f.value,currentCategory:x.value}))},[c.length,a.length]);let H=[{value:"",label:"Select Status",number:0},{value:"active",label:"Active",number:1},{value:"inactive",label:"Inactive",number:2}],$=e=>{r(b(a,{sort:o,sortColumn:C,q:h,perPage:i,page:e.selected+1,status:f.value,currentCategory:x.value})),v(e.selected+1)},M=e=>{let l=parseInt(e.currentTarget.value);r(b(a,{sort:o,sortColumn:C,q:h,perPage:l,page:n,currentCategory:x.value,status:f.value})),S(l)},U=e=>{N(e);var l=a.filter(d=>{if(d.name&&d.name.toLowerCase().includes(e.toLowerCase())||d.seourl&&d.seourl.toLowerCase().includes(e.toLowerCase())||d.seourl&&d.seourl.toLowerCase().includes(e.toLowerCase())||d.courseCategory&&d.courseCategory.toLowerCase().includes(e.toLowerCase()))return d});r(l)},V=()=>{let e=Number(Math.floor(a.length/i));return a.length%i!==0&&e++,t(te,{previousLabel:"",nextLabel:"",pageCount:e||1,activeClassName:"active",forcePage:n!==0?n-1:0,onPageChange:l=>$(l),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},_=()=>{let e={currentCategory:x.value,status:f.value,q:h},l=Object.keys(e).some(function(d){return e[d].length>0});return u.length>0?u:u.length===0&&l?[]:u.slice(0,i)},B=(e,l)=>{g(l),w(e.sortField),r(b(a,{sort:o,sortColumn:C,q:h,page:n,perPage:i,status:f.value,currentCategory:x.value}))},Q={Pending:"light-warning",Active:"light-success",Inactive:"light-danger"},G=[{name:"Title",sortable:!0,minWidth:"300px",sortField:"title",selector:e=>e.title,cell:e=>t("span",{className:"text-capitalize",children:e.title})},{name:"Seo Url",sortable:!0,minWidth:"300px",sortField:"seourl",selector:e=>e.seourl,cell:e=>t("span",{className:"text-capitalize",children:e.seourl})},{name:"Category",sortable:!0,minWidth:"100px",sortField:"courseCategory",selector:e=>e.courseCategory,cell:e=>t("span",{className:"text-capitalize",children:e.courseCategory})},{name:"Sort Order",sortable:!0,minWidth:"100px",sortField:"sortOrder",selector:e=>e.sortOrder,cell:e=>t("span",{className:"text-capitalize",children:e.sortOrder})},{name:"Popular",sortable:!0,minWidth:"100px",sortField:"popular",selector:e=>e.popular,cell:e=>t("span",{className:"text-capitalize",children:e.popular})},{name:"status",minWidth:"138px",sortable:!0,sortField:"status",selector:e=>e.status,cell:e=>t(Y,{className:"text-capitalize",color:Q[e.status],pill:!0,children:e.status})},{name:"Actions",minWidth:"100px",cell:e=>t("div",{className:"column-action",children:s(E,{children:[t(A,{tag:"div",className:"btn btn-sm",children:t(le,{size:14,className:"cursor-pointer"})}),s(Z,{className:"mb-5",children:[t(L,{children:s(P,{to:"/apps/course/show/"+e._id,children:[t(ne,{size:14,className:"me-50"}),t("span",{className:"align-middle",children:"View"})]})}),t(L,{children:s(P,{to:"/apps/course/update/"+e._id,children:[t(oe,{size:14,className:"me-50"}),t("span",{className:"align-middle",children:"Edit"})]})}),s(L,{className:"w-100",onClick:l=>{l.preventDefault(),p(ue({_id:e._id}))},children:[t(ie,{size:14,className:"me-50"}),t("span",{className:"align-middle",children:"Delete"})]})]})]})})}];return s(m.exports.Fragment,{children:[s(F,{children:[t(J,{children:t(K,{tag:"h4",children:"Filters"})}),t(X,{children:s(z,{children:[s(y,{className:"my-md-0 my-1",md:"4",children:[t(k,{for:"plan-select",children:"Category"}),t(O,{theme:j,isClearable:!1,className:"react-select",classNamePrefix:"select",options:W,value:x,onChange:e=>{I(e),r(b(a,{sort:o,sortColumn:C,q:h,page:1,perPage:i,currentCategory:e.value,status:f.value}))}})]}),s(y,{md:"4",children:[t(k,{for:"status-select",children:"Status"}),t(O,{theme:j,isClearable:!1,className:"react-select",classNamePrefix:"select",options:H,value:f,onChange:e=>{q(e),v(1),r(b(a,{sort:o,sortColumn:C,q:h,page:1,status:e.value,perPage:i,currentCategory:x.value}))}})]})]})})]}),t(F,{className:"overflow-hidden",children:t("div",{className:"react-dataTable",children:t(ee,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:G,onSort:B,sortIcon:t(re,{}),className:"react-dataTable",paginationComponent:V,data:_(),subHeaderComponent:t(me,{mainData:u,searchTerm:h,rowsPerPage:i,handleFilter:U,handlePerPage:M})})})})]})},Ne=()=>t("div",{className:"app-user-list",children:t(ge,{})});export{Ne as default};

import{h as L,r as o,o as r,an as D,j as t,af as k,ao as Z,ap as ee,ac as R,ad as w,a8 as T,aa as A,U as I,D as W,L as F,B as O,C as te,E as j}from"./index.7ed68957.js";import{S as E}from"./react-select.esm.67b469f7.js";import{Q as ae,R as se}from"./app-users.9834fa95.js";import{b as re,s as z,d as le,S as ne,M as oe,E as ce,e as ie,T as ue}from"./App.13c64db0.js";import{g as de}from"./FaqCategoryActionCreators.25da5af5.js";import{g as me,d as pe}from"./FaqActionCreators.ea820847.js";import"./toConsumableArray.917c2683.js";const he=({mainData:m,handlePerPage:a,rowsPerPage:c,handleFilter:u,searchTerm:p})=>{function i(h){let s;const n=",",v=`
`,g=Object.keys(m[0]);return s="",s+=g.join(n),s+=v,h.forEach(y=>{let d=0;g.forEach(P=>{d>0&&(s+=n),s+=y[P],d++}),s+=v}),s}function S(h){const s=document.createElement("a");let n=i(h);if(n===null)return;const v="export.csv";n.match(/^data:text\/csv/i)||(n=`data:text/csv;charset=utf-8,${n}`),s.setAttribute("href",encodeURI(n)),s.setAttribute("download",v),s.click()}return t("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:r(R,{children:[t(w,{xl:"6",className:"d-flex align-items-center p-0",children:r("div",{className:"d-flex align-items-center w-100",children:[t("label",{htmlFor:"rows-per-page",children:"Show"}),r(A,{className:"mx-50",type:"select",id:"rows-per-page",value:c,onChange:a,style:{width:"5rem"},children:[t("option",{value:"10",children:"10"}),t("option",{value:"25",children:"25"}),t("option",{value:"50",children:"50"})]}),t("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),r(w,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[r("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[t("label",{className:"mb-0",htmlFor:"search-invoice",children:"Search:"}),t(A,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:p,onChange:h=>u(h.target.value)})]}),r("div",{className:"d-flex align-items-center table-header-actions",children:[t(I,{className:"me-1",children:r(W,{color:"secondary",caret:!0,outline:!0,children:[t(ne,{className:"font-small-4 me-50"}),t("span",{className:"align-middle",onClick:()=>S(m),children:"Excel"})]})}),t(F,{className:"btn btn-primary add-new-user",to:"/apps/faq/create",children:"New FAQ"})]})]})]})})},ge=(m,a,c)=>m.slice((c-1)*a,c*a);function N(m,a){const c=m;try{const p=m.sort((i,S)=>i[a.sortColumn].localeCompare(S[a.sortColumn]));c=a.sort==="asc"?p:p.reverse()}catch{}let u=[];return a.status===""&&a.currentCategory===""?u=c:u=c.filter(p=>{try{return p.category&&a.currentCategory.toLowerCase()===p.category.toLowerCase()||p.status.toLowerCase()===a.status.toLowerCase()}catch{return c}}),ge(u,a.perPage,a.page)}const ve=()=>{const m=re(),a=L(e=>e.FaqStateData),c=L(e=>e.FaqCategoryStateData),[u,p]=o.exports.useState("desc"),[i,S]=o.exports.useState(""),[h,s]=o.exports.useState([]),[n,v]=o.exports.useState(1),[g,y]=o.exports.useState("id");o.exports.useState([]);const[d,P]=o.exports.useState(10),[f,Ce]=o.exports.useState({value:"",label:"Select Role"}),[x,fe]=o.exports.useState({value:"",label:"Select Plan"}),[C,H]=o.exports.useState({value:"",label:"Select Status",number:0});let[q,$]=o.exports.useState({value:"",label:"Select Category",number:0}),[M,Q]=o.exports.useState([]);o.exports.useEffect(()=>{if(m(de()),m(me()),c){let e=c.map(l=>({value:l.name,label:l.name}));e.unshift({value:"",label:"Select Category"}),Q(e)}s(N(a,{sort:u,sortColumn:g,q:i,page:n,perPage:d,role:f.value,status:C.value,currentPlan:x.value}))},[a.length,c.length]);const V=[{value:"",label:"Select Status",number:0},{value:"active",label:"Active",number:2},{value:"inactive",label:"Inactive",number:3}],_=e=>{s(N(a,{sort:u,sortColumn:g,q:i,perPage:d,page:e.selected+1,role:f.value,status:C.value,currentPlan:x.value})),v(e.selected+1)},B=e=>{const l=parseInt(e.currentTarget.value);s(N(a,{sort:u,sortColumn:g,q:i,perPage:l,page:n,role:f.value,currentPlan:x.value,status:C.value})),P(l)},U=e=>{S(e);let l=a.filter(b=>{if(b.question.toLowerCase().includes(e.toLowerCase())||b.answer.toLowerCase().includes(e.toLowerCase())||b.category.toLowerCase().includes(e.toLowerCase()))return b});s(l)},G=()=>{let e=Number(Math.floor(a.length/d));return a.length%d!==0&&e++,t(se,{previousLabel:"",nextLabel:"",pageCount:e||1,activeClassName:"active",forcePage:n!==0?n-1:0,onPageChange:l=>_(l),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},J=()=>{const e={role:f.value,currentPlan:x.value,status:C.value,q:i},l=Object.keys(e).some(function(b){return e[b].length>0});return h.length>0?h:h.length===0&&l?[]:h.slice(0,d)},K=(e,l)=>{p(l),y(e.sortField),s(N(a,{sort:u,sortColumn:g,q:i,page:n,perPage:d,role:f.value,status:C.value,currentPlan:x.value}))},X={Pending:"light-warning",Active:"light-success",Inactive:"light-danger"},Y=[{name:"Category",sortable:!0,minWidth:"150px",sortField:"category",selector:e=>e.category,cell:e=>t("span",{className:"text-capitalize",children:e.category})},{name:"Question",sortable:!0,minWidth:"300px",sortField:"question",selector:e=>e.question,cell:e=>t("span",{className:"text-capitalize",children:e.question})},{name:"Answer",minWidth:"138px",sortable:!0,sortField:"answer",selector:e=>e.answer,cell:e=>t("span",{className:"text-capitalize",children:e.answer})},{name:"status",minWidth:"138px",sortable:!0,sortField:"status",selector:e=>e.status,cell:e=>t(O,{className:"text-capitalize",color:X[e.status],pill:!0,children:e.status})},{name:"Sort Order",minWidth:"138px",sortable:!0,sortField:"sortOrder",selector:e=>e.sortOrder,cell:e=>t(O,{className:"text-capitalize",children:e.sortOrder})},{name:"Actions",minWidth:"100px",cell:e=>t("div",{className:"column-action",children:r(I,{children:[t(W,{tag:"div",className:"btn btn-sm",children:t(oe,{size:14,className:"cursor-pointer"})}),r(te,{children:[t(j,{className:"w-100",children:r(F,{to:"/apps/faq/show/"+e._id,children:[t(ce,{size:14,className:"me-50"}),t("span",{className:"align-middle",children:"View"})]})}),r(F,{to:"/apps/faq/update/"+e._id,className:"p-1",children:["\xA0",t(ie,{size:14,className:"me-50"}),t("span",{className:"align-middle",children:"Edit"})]}),r(j,{className:"w-100",onClick:l=>{l.preventDefault(),m(pe({_id:e._id}))},children:[t(ue,{size:14,className:"me-50"}),t("span",{className:"align-middle",children:"Delete"})]})]})]})})}];return r(o.exports.Fragment,{children:[r(D,{children:[t(k,{tag:"h3",className:"text-center pt-2",children:"Faqs"}),t(Z,{children:t(k,{tag:"h4",children:"Filters"})}),t(ee,{children:r(R,{children:[r(w,{className:"my-md-0 my-1",md:"4",children:[t(T,{for:"plan-select",children:"Category"}),t(E,{theme:z,isClearable:!1,className:"react-select",classNamePrefix:"select",options:M,value:q,onChange:e=>{$(e),s(N(a,{sort:u,sortColumn:g,q:i,page:1,perPage:d,currentCategory:e.value,status:C.value}))}})]}),r(w,{md:"4",children:[t(T,{for:"status-select",children:"Status"}),t(E,{theme:z,isClearable:!1,className:"react-select",classNamePrefix:"select",options:V,value:C,onChange:e=>{H(e),v(1),s(N(a,{sort:u,sortColumn:g,q:i,page:1,status:e.value,perPage:d,role:f.value,currentPlan:x.value,currentCategory:q.value}))}})]})]})})]}),t(D,{className:"overflow-hidden",children:t("div",{className:"react-dataTable",children:t(ae,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:Y,onSort:K,sortIcon:t(le,{}),className:"react-dataTable",paginationComponent:G,data:J(),subHeaderComponent:t(he,{mainData:h,searchTerm:i,rowsPerPage:d,handleFilter:U,handlePerPage:B})})})})]})};let Fe=()=>t("div",{className:"app-user-list",children:t(ve,{})});export{Fe as default};
